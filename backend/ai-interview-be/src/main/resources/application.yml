# Application Configuration
spring:
  application:
    name: ai-interview-be

  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    open-in-view: false  # Disable to prevent lazy loading issues
  
  jackson:
    serialization:
      fail-on-empty-beans: false  # Prevent errors on empty beans

  mail:
    host: smtp.gmail.com
    port: 587
    username: ${SPRING_MAIL_USERNAME}
    password: ${SPRING_MAIL_PASSWORD}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

  servlet:
    multipart:
      enabled: true
      max-file-size: 5MB
      max-request-size: 5MB

# Gemini AI Configuration
groq:
  api-key: ${GROQ_API_KEY}
  model: ${GROQ_MODEL:llama3-70b-8192}
  
gemini:
  api-key: ${GEMINI_API_KEY}
  model: ${GEMINI_MODEL}

# GenQ Service Configuration (DEPRECATED - now using Multitask v2)
genq:
  service:
    url: ${GENQ_SERVICE_URL:http://localhost:8000}
    timeout: ${GENQ_SERVICE_TIMEOUT:60}
    enabled: ${GENQ_SERVICE_ENABLED:false}  # Disabled - using Multitask v2
    max-tokens: ${GENQ_MAX_TOKENS:80}
    temperature: ${GENQ_TEMPERATURE:0.7}

# Judge Service Configuration (Multitask v2 - Custom Transformer 400K samples)
judge:
  service:
    url: ${JUDGE_SERVICE_URL:http://localhost:8000}  # Same port as AI service
    timeout: ${JUDGE_SERVICE_TIMEOUT:90}  # Increased for REPORT task
    enabled: ${JUDGE_SERVICE_ENABLED:true}

# JWT Configuration
setTime:
  accessToken: 2 # hours
  refreshToken: 72 # hours
  cookie:
    secure: ${COOKIE_SECURE:false} # Set to true in production

# Firebase Configuration
firebase:
  service-account:
    path: ${FIREBASE_SERVICE_ACCOUNT_PATH}

# OCR Configuration
ocr:
  enabled: true
  tessdata-path: "/usr/share/tesseract-ocr/5/tessdata"
  languages: "eng+vie"
  dpi: 300

# Cloudinary Configuration
cloudinary:
  cloud_name: ${CLOUDINARY_CLOUD_NAME}
  api_key: ${CLOUDINARY_API_KEY}
  api_secret: ${CLOUDINARY_API_SECRET}

# Logging Configuration
logging:
  level:
    com.capstone.ai_interview_be.service.AIService: DEBUG
    org.springframework.web.reactive.function.client: DEBUG
