# Test API Endpoints for AI Interview System

## Prerequisites

- Start the application: Run AiInterviewBeApplication in your IDE
- Application should be running on: http://localhost:8080
- MySQL database should be running with 'ai_interview' database created
- **OpenRouter API**: Real AI-powered questions and feedback using OpenRouter API

## Features

✅ **Real AI Questions**: Generated by OpenRouter AI based on domain and level
✅ **Smart Feedback**: AI analyzes answers and provides constructive feedback  
✅ **Adaptive Flow**: Next questions build on previous answers
✅ **Fallback System**: Falls back to mock responses if API fails

## Test Flow

### 1. Test Application Status

```http
GET http://localhost:8080/api/interviews/test
```

Expected: `"Interview API is working!"`

### 2. Create Interview Session

```http
POST http://localhost:8080/api/interviews
Content-Type: application/json

{
    "title": "Java Developer Interview",
    "domain": "Java",
    "level": "Senior",
    "userId": 1
}
```

Expected Response:

```json
{
  "sessionId": 1
}
```

### 3. Get Session Questions

```http
GET http://localhost:8080/api/interviews/1/questions
```

Expected Response:

```json
[
  {
    "id": 1,
    "sessionId": 1,
    "content": "Explain the concept of multithreading in Java and how you would handle thread safety.",
    "createdAt": "2025-09-29T16:00:00"
  }
]
```

### 4. Submit Answer (Main Task)

```http
POST http://localhost:8080/api/interviews/1/answers
Content-Type: application/json

{
    "questionId": 1,
    "content": "Multithreading in Java allows concurrent execution of multiple threads within a single process. To handle thread safety, I use synchronization mechanisms like synchronized keyword, ReentrantLock for explicit locking, volatile keyword for visibility guarantees, and concurrent collections from java.util.concurrent package like ConcurrentHashMap. I also follow best practices like avoiding shared mutable state when possible and using thread-safe design patterns."
}
```

Expected Response:

```json
{
  "answerId": 1,
  "feedback": "Good answer! Consider providing more examples to strengthen your response.",
  "nextQuestion": {
    "questionId": 2,
    "content": "Can you explain the difference between abstract classes and interfaces?"
  }
}
```

### 5. Submit Second Answer

```http
POST http://localhost:8080/api/interviews/1/answers
Content-Type: application/json

{
    "questionId": 2,
    "content": "Abstract classes can have concrete methods and constructors, while interfaces traditionally only had abstract methods (though Java 8+ allows default and static methods). Abstract classes support single inheritance, interfaces support multiple inheritance. Use abstract classes when you want to share code among related classes with common functionality, use interfaces when you want to specify a contract for unrelated classes to implement."
}
```

## Expected Database State After Full Test:

- `interview_session`: 1 record (sessionId=1)
- `interview_question`: 3 records (original + 2 generated)
- `interview_answer`: 2 records (2 submitted answers)

## Validation Points:

✅ Session created successfully
✅ First question generated automatically
✅ Answer saved with AI feedback
✅ Next question generated based on previous answer
✅ All endpoints working without errors
✅ Database relationships maintained

## Troubleshooting:

- If 404 error: Check if application is running on port 8080
- If 500 error: Check database connection and logs
- If empty questions []: Check if first question was created during session creation
